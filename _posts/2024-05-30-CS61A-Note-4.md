---
layout: post
title:  "CS61A-Note-4"
date:   2024-05-30 15:53:00 +0000
categories: Note
tags: CS61A 
---

Notes on [CS61A-2024](https://cs61a.org/) Weeks 7 to 8: Objects, Attributes, and Inheritance.

# Object-Oriented Programming (OOP)

Object-oriented programming (**OOP**) is a method for organizing programs. OOPæŠŠå¯¹è±¡ä½œä¸ºç¨‹åºçš„åŸºæœ¬å•å…ƒï¼Œä¸€ä¸ªå¯¹è±¡åŒ…å«äº†æ•°æ®å’Œæ“ä½œæ•°æ®çš„å‡½æ•°ï¼Œç›¸åŒå±æ€§å’Œæ“ä½œæ–¹æ³•çš„å¯¹è±¡è¢«æŠ½è±¡ä¸ºç±»ã€‚

OOPç‰¹åˆ«é€‚ç”¨äºæ¨¡æ‹Ÿå…·æœ‰ç‹¬ç«‹ä½†ç›¸äº’ä½œç”¨éƒ¨åˆ†çš„ç³»ç»Ÿçš„ç¨‹åºã€‚

# Objects

<aside>
âœ‚ï¸ &nbsp; Every object is an <strong>instance</strong> of some particular class.

</aside>

å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºåœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¤åˆ¶äº†ç±»çš„ä¸€ä»½å†…å­˜ç©ºé—´ï¼Œå¹¶åœ¨å†…å­˜ç©ºé—´ä¸­å¡«å…¥äº†å®ä¾‹çš„å‚æ•°å€¼ã€‚

- AnÂ *attribute*Â of an object is a **name-value pair** associated with the object, which is accessible via dot notation.
- Functions that operate on the object or perform object-specific computations are called *methods*. æ–¹æ³•æ˜¯åœ¨ç‰¹å®šå¯¹è±¡ä¸Šè°ƒç”¨çš„ã€‚

æ³¨æ„ï¼Œç±»çš„ç§æœ‰å±æ€§å’Œç±»æ–¹æ³•ä¸å¯è¢«å®ä¾‹åŒ–ï¼Œå®ƒä»¬è¿˜æ˜¯æŒ‡å‘åŸæ¥çš„ç±»ã€‚

# Classes
<aside>
âœ‚ï¸ &nbsp; A class serves as a <strong>template</strong> for all objects of that type.

</aside>

é€šè¿‡ class å…³é”®å­—æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œå…¶ä»£ç å—åŒ…å«å®šä¹‰è¯¥ç±»å¯¹è±¡çš„æ–°æ–¹æ³•çš„ `def` è¯­å¥ï¼Œè¿™äº›æ–¹æ³•å®šä¹‰äº†ç±»çš„è¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç±»çš„æ„å»ºæ–¹æ³•ï¼š

```python
class <name>:
    <suite>
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œç±»ä¼šå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•æ¥æŒ‡å®šå…¶å¯¹è±¡çš„å®ä¾‹å±æ€§ã€‚è¿™ä¸ªæ–¹æ³•åœ¨ Python ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åç§°ï¼Œå«åš `__init__`ï¼Œé€šå¸¸è¢«ç§°ä¸ºæ„é€ å‡½æ•°ã€‚

è€Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯è¯¥ç±»çš„ä¸€ä¸ªç‹¬ç«‹å‰¯æœ¬ï¼Œå…·æœ‰è‡ªå·±çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹ä¸Šæ“ä½œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚

## ç±»çš„å‘½å

- ç±»åé€šå¸¸ä½¿ç”¨ CapWords çº¦å®šç¼–å†™ â†’ ä¹Ÿç§°ä¸º CamelCaseï¼Œå› ä¸ºåç§°ä¸­é—´çš„å¤§å†™å­—æ¯çœ‹èµ·æ¥åƒé©¼å³°ã€‚
- æ–¹æ³•åéµå¾ªä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”çš„å°å†™å•è¯å‘½åå‡½æ•°çš„æ ‡å‡†çº¦å®šã€‚

## Message passing

å¯¹è±¡å¯ä»¥é€šè¿‡dot expressions è°ƒç”¨è‡ªå·±å®ä¾‹å±æ€§ï¼ˆinstance attributesï¼‰ï¼Œä»¥åŠè¡Œä¸ºæ–¹æ³•ï¼ˆmethodsï¼‰ã€‚

å†…ç½®å‡½æ•°Â `getattr`Â ä¹Ÿå¯ä»¥é€šè¿‡åç§°è¿”å›å¯¹è±¡çš„å±æ€§ã€‚

```python
>>>getattr(spock_account, 'balance')
10
```

æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªå†…ç½®å‡½æ•° hasattr åˆ¤æ–­æ˜¯å¯¹è±¡æ˜¯å¦æœ‰å‘½åå±æ€§ã€‚

```python
>>> hasattr(spock_account, 'deposit')
True
```

# Attributes
<aside>
âœ‚ï¸ &nbsp; AnÂ attributeÂ of an object is a name-value pair associated with the object, which is accessible via dot notation.Â 

</aside>

## 1. Instance Attributes

The attributes specific to a particular object, as opposed to all objects of a class, are calledÂ *instance attributes*. 

The class specifies the instance attributes of its objects by defining a method for initializing new objects. 

```python
>>> class Account:
        def __init__(self, account_holder):
            self.balance = 0
            self.holder = account_holder
```

The constructor binds the instance attribute nameÂ **balance**Â to 0.

## 2. Class Attributes

æŸäº›å±æ€§å€¼åœ¨ç»™å®šç±»çš„æ‰€æœ‰å¯¹è±¡ä¹‹é—´å…±äº«ã€‚è¿™äº›å±æ€§ä¸ç±»æœ¬èº«ç›¸å…³è”ï¼Œè€Œä¸æ˜¯ä¸ç±»çš„ä»»ä½•å•ä¸ªå®ä¾‹ç›¸å…³è”ã€‚

ç±»è‡ªèº«å¯ä»¥å…·æœ‰è‡ªå·±çš„å±æ€§ï¼Œè¢«ç§°ä¸ºç±»å±æ€§ï¼Œæˆ–è€…ç±»æˆå‘˜å˜é‡ã€‚ç±»å±æ€§å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è®¿é—®ã€‚

```python
>>> class Account:
        interest = 0.02            # A class attribute
        def __init__(self, account_holder):
            self.balance = 0
            self.holder = account_holder
        # Additional methods would be defined here
```

## 3. Names

å¦‚å‰æ–‡æ‰€è¿°ï¼Œæˆ‘ä»¬ä½¿ç”¨dot expressionæ¥è°ƒç”¨attributesã€‚

```python
<expression> . <name>
```

è€Œåœ¨è¯„ä¼° dot expressionsçš„æ—¶å€™ï¼Œä¼šå…ˆå°†å¾—åˆ°çš„åç§°ä¸å¯¹è±¡çš„å®ä¾‹å±æ€§è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœå®ä¾‹å±æ€§å­˜åœ¨åˆ™è¿”å›å…¶å€¼ã€‚å¦‚æœå®ƒä¸å­˜åœ¨ï¼Œå°±ä¼šåœ¨ç±»ä¸­æŸ¥æ‰¾ï¼Œæœ€ç»ˆè¿”å›ç±»å±æ€§çš„å€¼ã€‚

æ‰€æœ‰åŒ…å«ç‚¹è¡¨è¾¾å¼çš„èµ‹å€¼è¯­å¥éƒ½ä¼šå½±å“è¯¥ç‚¹è¡¨è¾¾å¼å¯¹è±¡çš„å±æ€§ã€‚å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆèµ‹å€¼ä¼šè®¾ç½®ä¸€ä¸ªå®ä¾‹å±æ€§ã€‚å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆèµ‹å€¼ä¼šè®¾ç½®ä¸€ä¸ªç±»å±æ€§ã€‚å¯¹å‰è€…çš„èµ‹å€¼å¹¶ä¸ä¼šå½±å“åè€…ã€‚

## 4. Private Attributes

åœ¨Pythonä¸­ï¼Œé€šè¿‡åœ¨å±æ€§åå‰åŠ åŒä¸‹åˆ’çº¿ `__` æ¥å®šä¹‰ç§æœ‰å±æ€§ã€‚

- ç±»çš„ç§æœ‰å±æ€§ç”¨äºé™åˆ¶å±æ€§çš„è®¿é—®æƒé™ã€‚
- å®ä¾‹çš„ç§æœ‰å±æ€§æ˜¯ç»‘å®šåˆ°å…·ä½“å®ä¾‹çš„å±æ€§ã€‚è¿™äº›å±æ€§åªèƒ½é€šè¿‡å®ä¾‹æ–¹æ³•è®¿é—®ï¼Œä¸èƒ½é€šè¿‡ç›´æ¥è®¿é—®å®ä¾‹å±æ€§çš„æ–¹å¼è®¿é—®ã€‚

ä¸ºä»€ä¹ˆä½¿ç”¨ç§æœ‰å±æ€§ï¼Ÿ

1. **éšè—å®ç°ç»†èŠ‚**ï¼šé˜²æ­¢å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚
2. **æ§åˆ¶è®¿é—®**ï¼šé€šè¿‡getterå’Œsetteræ–¹æ³•æ§åˆ¶å¯¹å±æ€§çš„è¯»å–å’Œä¿®æ”¹ï¼Œå¯ä»¥æ·»åŠ æ•°æ®éªŒè¯å’Œå…¶ä»–é€»è¾‘ã€‚

## 5. Methods

### å®ä¾‹æ–¹æ³•

å®ä¾‹æ–¹æ³•æ˜¯ç±»çš„å¸¸è§„æ–¹æ³•ï¼Œç”¨äºæ“ä½œå®ä¾‹çº§åˆ«çš„æ•°æ®å’Œè¡Œä¸ºã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹æœ¬èº«ï¼Œä¸€èˆ¬ä½¿ç”¨ `self` è¡¨ç¤ºã€‚åªèƒ½é€šè¿‡å®ä¾‹å¯¹è±¡ç›´æ¥è°ƒç”¨ã€‚

### ç±»æ–¹æ³•

ç±»æ–¹æ³•æ˜¯é’ˆå¯¹ç±»æœ¬èº«è€Œä¸æ˜¯å®ä¾‹çš„æ–¹æ³•ã€‚

- ç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ `cls`ï¼Œå®ƒä»£è¡¨ç±»æœ¬èº«ï¼Œåœ¨è°ƒç”¨æ—¶è¢«éšå¼ä¼ é€’ã€‚å£°æ˜ç±»æ–¹æ³•æ—¶å¿…é¡»ä½¿ç”¨ `@classmethod` è£…é¥°å™¨ã€‚
- ç±»æ–¹æ³•å¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡æˆ–è€…ç±»å¯¹è±¡è°ƒç”¨ã€‚

### é™æ€æ–¹æ³•

- ä½¿ç”¨ `@staticmethod` è£…é¥°å™¨å¯ä»¥å®šä¹‰ç±»çš„é™æ€æ–¹æ³•ã€‚ä¸é™æ€æ–¹æ³•ä¸éœ€è¦è®¿é—®ç±»æˆ–å®ä¾‹çš„å±æ€§ï¼Œå› æ­¤æ²¡æœ‰ `self` æˆ– `cls` å‚æ•°ã€‚
- é™æ€æ–¹æ³•æ˜¯ç‹¬ç«‹äºç±»å’Œå®ä¾‹çš„æ–¹æ³•ï¼Œå®ƒä»¬ä¸è®¿é—®ç±»æˆ–å®ä¾‹çš„æ•°æ®ã€‚å®ƒä»¬é€šå¸¸ç”¨äºæä¾›ä¸ç±»ç›¸å…³çš„ä¸€äº›å®ç”¨å‡½æ•°ï¼Œä½†è¿™äº›å‡½æ•°ä¸éœ€è¦è®¿é—®ç±»æˆ–å®ä¾‹ã€‚

<aside>
ğŸ§€ &nbsp; æ— è®ºæ˜¯ç±»æ–¹æ³•è¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œéƒ½åªèƒ½é€šè¿‡ç±»ååŠ ç‚¹å·çš„æ–¹å¼è°ƒç”¨ã€‚

</aside>

## Example

```python
class Student:
    # ç±»å±æ€§
    school_name = "Default School"

    def __init__(self, name, age, student_id):
        self.__name = name      # å®ä¾‹çš„ç§æœ‰å±æ€§
        self.__age = age        # å®ä¾‹çš„ç§æœ‰å±æ€§
        self.student_id = student_id

    # å®ä¾‹æ–¹æ³•
    def get_name(self):
        return self.__name

    # å®ä¾‹æ–¹æ³•
    def set_name(self, name):
        self.__name = name

    # å®ä¾‹æ–¹æ³•
    def get_age(self):
        return self.__age

    # å®ä¾‹æ–¹æ³•
    def set_age(self, age):
        if 0 < age < 120:
            self.__age = age
        else:
            raise ValueError("Invalid age")

    # å®ä¾‹æ–¹æ³•
    def display_student_info(self):
        print(f"Name: {self.get_name()}")
        print(f"Age: {self.get_age()}")
        print(f"Student ID: {self.student_id}")
        print(f"School Name: {Student.school_name}")

    # ç±»æ–¹æ³•
    @classmethod
    def set_school_name(cls, name):
        cls.school_name = name

    # é™æ€æ–¹æ³•
    @staticmethod
    def is_valid_age(age):
        return 0 < age < 120
```

- **å®ä¾‹å±æ€§**ï¼šåœ¨ `__init__` æ–¹æ³•ä¸­å®šä¹‰ï¼Œå±äºæ¯ä¸ªå®ä¾‹ã€‚`student_id` æ˜¯ä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ `student_id`ã€‚
- **ç±»å±æ€§**ï¼šåœ¨ç±»ä½“ä¸­å®šä¹‰ï¼Œå±äºç±»æœ¬èº«ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ã€‚`school_name` æ˜¯ä¸€ä¸ªç±»å±æ€§ã€‚
- **å®ä¾‹æ–¹æ³•**ï¼šç”¨äºæ“ä½œå’Œè®¿é—®å®ä¾‹å±æ€§ã€‚
- **ç±»æ–¹æ³•**ï¼šç”¨äºæ“ä½œç±»å±æ€§ã€‚
- **é™æ€æ–¹æ³•**ï¼šç”¨äºç‹¬ç«‹äºå®ä¾‹å’Œç±»çš„æ•°æ®éªŒè¯æˆ–å…¶ä»–å®ç”¨åŠŸèƒ½ã€‚

# Inheritance

Python æ”¯æŒå­ç±»ä»å¤šä¸ªåŸºç±»ç»§æ‰¿å±æ€§çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸€ç§ç§°ä¸ºå¤šé‡ç»§æ‰¿ï¼ˆmultiple Inheritanceï¼‰çš„è¯­è¨€ç‰¹æ€§ã€‚

è¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºåŸºç±»ï¼ˆBase Classesï¼‰æˆ–è¶…ç±»ï¼ˆSuper Classesï¼‰ï¼Œä¹Ÿå«çˆ¶ç±»ï¼ˆParent Classesï¼‰ã€‚å½“å‰ç±»åˆ™ç§°ä¸ºå­ç±»ï¼ˆSubclassesï¼‰ã€‚

å­ç±»ç»§æ‰¿å…¶åŸºç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†å¯ä»¥è¦†ç›–å…¶ä¸­çš„æŸäº›å±æ€§å’Œæ–¹æ³•ã€‚é€šè¿‡ç»§æ‰¿ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šå­ç±»ä¸åŸºç±»çš„ä¸åŒä¹‹å¤„ã€‚å­ç±»ä¸­æœªå®šä¹‰çš„éƒ¨åˆ†å°†è‡ªåŠ¨é‡‡ç”¨åŸºç±»çš„å®ç°ã€‚

å¯ä»¥ä½¿ç”¨ `issubclass` æ¥åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦ä¸ºå¦ä¸€ä¸ªç±»çš„å­ç±»ã€‚

## Example: Inheritance

```python
>>> class Account:
        """A bank account that has a non-negative balance."""
        interest = 0.02
        def __init__(self, account_holder):
            self.balance = 0
            self.holder = account_holder
        def deposit(self, amount):
            """Increase the account balance by amount and return the new balance."""
            self.balance = self.balance + amount
            return self.balance
        def withdraw(self, amount):
            """Decrease the account balance by amount and return the new balance."""
            if amount > self.balance:
                return 'Insufficient funds'
            self.balance = self.balance - amount
            return self.balance
```

```python
>>> class CheckingAccount(Account):
        """A bank account that charges for withdrawals."""
        withdraw_charge = 1
        interest = 0.01
        def withdraw(self, amount):
            return Account.withdraw(self, amount + self.withdraw_charge)
```

## Example: Multiple Inheritance

```python
>>> class SavingsAccount(Account):
        deposit_charge = 2
        def deposit(self, amount):
            return Account.deposit(self, amount - self.deposit_charge)
```

```python
>>> class AsSeenOnTVAccount(CheckingAccount, SavingsAccount):
        def __init__(self, account_holder):
            self.holder = account_holder
            self.balance = 1      
```